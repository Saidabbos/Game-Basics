<!DOCTYPE HTML>
<html>
<head>
    <title>Toy Phone</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1, IE=9">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true" />
    <meta name="robots" content="noindex,nofollow" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Phaser App">
    <meta name="viewport" content="initial-scale=1 maximum-scale=1 user-scalable=0 minimal-ui" />
    <script src="../js/phaser.min.js"></script>
</head>
<body>

    <div id="game"></div>
    <div id="orientation"></div>
<script>
var game = new Phaser.Game(384, 600, Phaser.CANVAS, 'Toy-Phone', { preload: preload, create: create});
var buttons = [];
var call_num;

function preload() {
    game.load.image('btnc', 'res/btnc.png');
}

function create() {

    var style = { font: "65px Arial", fill: "#ff0044", align: "center" };

    var scaley = 0.75;

    var btn_space = 100;
    var btn_v = 0;
    for(var i = 0;i < 12;i++){
        buttons.push(game.add.sprite(btn_v, btn_space, 'btnc'));
        buttons[i].scale.setTo(1,scaley);

        buttons[i].inputEnabled = true;
        buttons[i].events.onInputDown.add(click, this);

        var textX = buttons[i].position.x + buttons[i].width / 3;
        var textY = buttons[i].position.y + buttons[i].height / 6;

        if(i < 9){
            buttons[i].num_val = i+1;
            buttons[i].text = game.add.text(textX, textY, i+1, style);
        }else if(i == 9){
            buttons[i].num_val = "*";
            buttons[i].text = game.add.text(textX, textY, "*", style);
        }else if(i == 10){
            buttons[i].num_val = "0";
            buttons[i].text = game.add.text(textX, textY, "0", style);
        }else if(i == 11){
            buttons[i].num_val = "#";
            buttons[i].text = game.add.text(textX, textY, "#", style);
        }

        btn_v += 128;
        if(btn_v > 256){
            btn_v=0;
            btn_space+=buttons[i].height;
        }
    }
    
    call_num = game.add.text(0, 0, " ", style);    
}


function click(btn){
    call_num.text += btn.num_val;
    if(call_num.text.length > 9){
        call_num.text = " "
        make_call();
    }
};

function make_call(){
    console.log("Placing Call...");
}

</script>

</body>
</html>
